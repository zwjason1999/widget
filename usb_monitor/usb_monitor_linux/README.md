# 程序设计目的介绍
类UNIX系统的机器上USB热插拔监听。假设一台机器上有`n`个可使用的USB接口，可以指定其中一个为推荐的USB接口，当设备从其他USB接口插入时就在`stdout`打印警告信息。

扩展性：
1. 修改代码可以指定多个推荐的USB接口（见代码`14-18`行的操作方法）；
2. 修改代码将从非推荐USB接口插入的设备弹出，实现USB接口管控。

# 程序设计原理
基于第三方开源库`libusb`提供的回调机制实现USB设备热插拔监听，该库官方网站上的资料丰富，尤其是既有接口总览，也有将接口按模块分类讲解。从这一点上来说，值得点赞。

但是该库声称跨平台支持Windows、Linux、macOS，但其实回调机制并不支持Windows。github issue上2015年就有人提出该需求，其中的对话扯皮挺有意思，值得一看，可惜最终2023年还没有实现。

![image-20230403180301981](https://img-bed-1304092357.cos.ap-guangzhou.myqcloud.com/usb_hotplug2.png)

# 环境与编译运行

1. 类UNIX系统，本程序在ubuntu 18.04上开发；
2. gcc 7.5.0（低于该版本请自测兼容性）；
3. 自行安装`libusb`库（若安装时安装路径不采用默认路径，请自行修改`Makefile`）；
4. `make`生成可执行文件。